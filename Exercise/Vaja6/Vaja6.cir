Vaja5

*includamo tranzistor
    .include models.inc

    *AC analiza
    
    *upornosti
    r_rs      6   1   r=12.5k
    r_rc      6   4   r=75.9k
    
    r_rscr    8   7   r=1k
    r_rl      3   0   r=1.4k
   
    *kapacitiovnosti
    c_c1    7    1    c=100u
    c_cl    3    7    c=100u
    c_ce    6    0    c=100u
    
    *napajalniki
    vcc      6   0   dc=10     
    v_vin    8   0   dc=0   sin(0,0.005,5k) acmag=1
 

    *viri nadomestni za merjenje toka
    v_icq     4  3  dc=0

   
    
    * m_imeTran (c b e) imeModela parametri
    q_q1    3 1 0   BC238B 
   
    
    .control
    
    destroy all
  
  	echo _________VAJA6__________
    echo
    echo        
    echo .........NALOGA_2.........
       
    *naredi DC analizo
    op
            
    *nastavimo vektorje ki jih iscemo
    let icq   = i(v_icq)
    let vceq  = v(3,0)
            
    *izpisemo vektroje
     print icq, vceq
    
    echo 
    echo .........NALOGA_3................
     
  	echo ----------------------Napetostno ojacanje-----------------------------
	
	tran 1u 5m
	
	*napetostno ojacanje
		let vout=v(3)
		let vin=v(8)

    	let vout_pp=max(vout)-min(vout)
		let vin_pp=max(vin)-min(vin)
	
		let Av = vout_pp/vin_pp
  
  		*izpise ojacanje
		print   Av
  
  
  	echo ----------------------Malosignalna izmenicna analiza-----------------------------
    
    *malosignalna izmenicna analiza => potrebuje vsaj en acmag vir
    *sytaxa:
        *ac tip_skale st_tock fstart fstop
    *Kva naredi spice?:condenzatorje in tuljave nadomesti z kompleksorji
    
   	ac  dec   10   1   100meg
    
   	let vout=v(7)
	let vin=v(8)
	av=vout/vin
   	*aplitudni spekter
  		  let av_db=db(av)
    
   	*phase spector
  		  let av_ph=ph(av)
    
   		 plot av_db xlabel 'f' ylabel 'Av[dB]'
   		 plot av_ph xlabel 'f' ylabel 'Phase'
    
    	*fl in fh se odcita iz grafa -> 3dB dy in pugledas kok kaze dx
    
    	*fh = 3*10^5
   		 *fl = 4*10^3
    	*izpis av za AC izmenicni signal
   		 *print av
   	
    	echo
  
  	.endc
  	
 .end
